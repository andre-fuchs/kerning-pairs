El conflicto diplomático entre España y Marruecos de 2007 consistió en una alteración de las relaciones internacionales entre ambos países, de breve duración y de relativamente baja intensidad, que se suscitó tras el anuncio de la inminente visita oficial de los reyes de España a Ceuta y Melilla, ciudades españolas situadas en África y reivindicadas por Marruecos.
Se inició de manera formal el 2 de noviembre de 2007 cuando el Gobierno de Marruecos «llamó a consultas» a su embajador en España, Omar Azziman, por un «período indeterminado,... después de muy altas instrucciones de Su Majestad el Rey Mohamed VI», como consecuencia, según nota diplomática del Ministerio de Asuntos Exteriores y Cooperación de Marruecos, de «el anuncio oficial el viernes de la lamentable visita de su majestad el rey Juan Carlos I, los días 5 y 6 de noviembre, a las dos ciudades ocupadas de Ceuta y Melilla», calificando la visita de «iniciativa reprochable, cuales quieran que sean los motivos y objetivos».[1]​[2]​
Tras comunicar la llamada a consultas del embajador, el portavoz del Gobierno marroquí manifestó: «la pelota está en el campo de España y esperamos que este país tenga en consideración los sentimientos del pueblo marroquí y el interés de las relaciones bilaterales y de cooperación».[2]​
La visita real se produjo en los días previstos, registrándose una afluencia de decenas de miles de ciudadanos, que aclamaron a los reyes tanto en Ceuta como en Melilla. Durante esos días continuaron las declaraciones contrarias a la visita por parte de las autoridades marroquíes. En este sentido el primer ministro de Marruecos, Abbas el Fassi, llegó a comparar la situación de ambas ciudades con la ocupación israelí de los Territorios Palestinos, y el propio rey Mohamed VI calificó la visita como un «acto nostálgico y de una era sombría y superada». El Gobierno español, poco antes del viaje, y tras anunciar Marruecos su oposición, declaró a través de la vicepresidenta del Gobierno, María Teresa Fernández de la Vega, que la visita de los reyes de España era un acto de «normalidad institucional». Días después, a iniciativa de algunos colectivos de Marruecos, algunos cientos de personas llevaron a cabo actos de protesta en Tetuán, así como frente al límite fronterizo con Ceuta y Melilla. Marruecos suspendió también las visitas de alto nivel de autoridades españolas a su país.
Finalmente, el ministro de Asuntos Exteriores de España, Miguel Ángel Moratinos, visitó en Rabat a su homólogo marroquí el 3 de enero de 2008, haciéndole entrega de una carta personal del presidente del Gobierno José Luis Rodríguez Zapatero al monarca alauí, en la que abogaba por estrechar las relaciones entre ambos países. Cuatro días después, el Ministerio de Asuntos Exteriores marroquí anunció el regreso de su embajador a Madrid, dándose así por finalizado el conflicto.
El 30 de octubre el Gobierno de España dio a conocer la visita de los reyes Juan Carlos I y Sofía a Ceuta y Melilla para los días 5 y 6 de noviembre. El día anterior, el presidente del gobierno español, José Luis Rodríguez Zapatero, había comunicado tal circunstancia al líder de la oposición, Mariano Rajoy, durante un acto oficial, a lo que Rajoy manifestó su satisfacción.
Los reyes de España no habían visitado Ceuta ni Melilla en todo su reinado. El antecedente más inmediato de la estancia del rey Juan Carlos I en estas ciudades databa de 1970, cuando realizó una visita a Ceuta en su condición de príncipe de Asturias con motivo de cumplirse el quincuagésimo aniversario de la Legión.
Las últimas visitas de un jefe de Estado de España a Ceuta y Melilla se remontaban a las que hicieran el rey Alfonso XIII, que estuvo por última vez en 1927, y el presidente de la Segunda República Niceto Alcalá Zamora, que lo hizo el 4 de noviembre de 1933.[3]​
Los reyes de España habían previsto realizar una visita en 1997 a la ciudad autónoma de Melilla con ocasión del V Centenario de la fundación de la misma, pero la presión de las autoridades marroquíes llevó a anularla.[4]​
El día 5 de noviembre el rey y la reina de España permanecieron cinco horas en Ceuta, donde intervinieron ante la Asamblea de la ciudad autónoma, donde el monarca manifestó que «tenía un compromiso pendiente con Ceuta, con los ceutíes y con sus autoridades, pero también con nosotros mismos como Reyes que se deben, ante todo, a todos los españoles». Ni el monarca, ni la ministra de Administraciones Públicas que lo acompañaba, Elena Salgado, ni ninguna otra autoridad española hicieron mención alguna a la situación con Marruecos.[3]​ Los reyes fueron acogidos por unas 25.000 personas.[5]​
El 6 de noviembre los reyes acudieron a Melilla, en cuya Asamblea intervino el monarca español. Allí agradeció la lealtad de los melillenses a la Corona. No hizo mención expresa a Marruecos, aunque manifestó que «España desde el respeto mutuo cultiva relaciones de sincera amistad con sus vecinos». El número de personas que se concentraron para recibir a los reyes se cifró en 30.000.[6]​
Un mes antes del anuncio de la visita real, el juez de la Audiencia Nacional de España, Baltasar Garzón, había abierto expediente para investigar un supuesto genocidio de saharauis por parte de Marruecos, admitiendo a trámite la querella presentada en 2006 por distintas asociaciones de defensa de los derechos humanos y familiares de presos y de desaparecidos saharauis, donde se acusaba a 31 altos cargos de la seguridad marroquí. Marruecos, por su parte, le acusó de alinearse con las posiciones del Frente Polisario. El portavoz marroquí afirmó que «sería bueno que el juez Garzón se ocupe un poco del respeto de los Derechos Humanos en Tinduf».[7]​ Entre los acusados se encuentran Dris Basri, exministro del Interior, y el general Housni Benslimane.[8]​
Según declaró Yassine Mansouri, jefe del Servicio Secreto Exterior de Marruecos (DGED), durante una estancia en Mallorca, el deterioro de las relaciones también está relacionado con la posición activa del Gobierno español y de las autoridades locales de Ceuta de desvincular a los creyentes musulmanes de la ciudad del islam malekita y del Ministerio de Asuntos Religiosos de Marruecos y apostar por los movimientos como el Tablig (Congregación para la Propagación del Islam) o los Hermanos Musulmanes, de lo que Mansouri informó a Alberto Saiz, director del Centro Nacional de Inteligencia.
La situación era causa de enojo de Mohamed VI, según Mansouri, que recordaba que el rey marroquí es comendador de los creyentes y que muchas mezquitas de Ceuta se habían ido vinculando a la Unión de Comunidades Islámicas de España (UCIDE) (36 de las 40 comunidades islámicas de Ceuta). La figura del líder de la UCIDE en Ceuta, Laarbi Maateis, es relacionada por Marruecos con movimientos islamistas radicales. Por su parte, Laarbi Maateis negó cualquier vinculación con movimientos integristas, indicando que ningún miembro del Tablig había sido jamás detenido ni señalado como sospechoso de vinculación con el yihadismo. Indicó también no entender la acusación «porque el rito malekita se practica tanto aquí como en el resto de España como en Marruecos y nadie ha intentado cambiar eso, sobre todo porque nos parece que es lo mejor para la ciudad».[9]​[10]​
El primer ministro de Marruecos, Abbas el Fassi, había comunicado al Parlamento marroquí el 31 de octubre que su gobierno no ahorraría esfuerzos para recuperar las dos ciudades (Ceuta y Melilla). Al día siguiente, 1 de noviembre, Abbas el Fassi pidió al rey de España que «renunciara» al viaje, al tiempo que el ministro-portavoz del Gobierno de Marruecos, Khalid Naciri, manifestaba el «total rechazo y reprobación» de la visita real a las «ciudades marroquíes expoliadas». Abbas el Fassi, sin embargo, manifestó en ese momento a la prensa española que no habría medidas coercitivas y que el conflicto «debe de ser abordado con inteligencia, respeto mutuo, concertándose y dialogando».[1]​
El día 5 de noviembre, mientras el rey Juan Carlos I visitaba Ceuta, Abbas el Fassi comparó la situación de Ceuta y Melilla con la ocupación israelí de Palestina durante una sesión extraordinaria del Parlamento marroquí para tratar de la cuestión. 
La descolonización sigue estando de actualidad en los escasos focos que persisten en el mundo, como Palestina ocupada, las ciudades de Ceuta y Melilla....
En el mismo sentido se pronunció el líder islamista marroquí del Partido Justicia y Desarrollo, Mustafá Ramid, al manifestar en el Parlamento que «los marroquíes viven bajo la colonización española como nuestros hermanos palestinos bajo la colonización israelí».[11]​
El 6 de noviembre, después de la celebración de un Consejo de Ministros y antes de intervenir en los actos de conmemoración de la marcha verde en el Parlamento marroquí, el rey Mohamed VI emitió un comunicado personal de dura condena a través de un portavoz:[12]​
Expresamos con fuerza nuestra enérgica condena y denunciamos con la misma firmeza esta visita sin precedentes. [...] Ante este acto nostálgico y de una era sombría y superada, las autoridades españolas deben asumir su responsabilidad en cuanto a las consecuencias que pueden poner en peligro el porvenir y la evolución de las relaciones entre ambos países. [...]
En el mismo comunicado Mohamed VI solicitaba la apertura formal de negociaciones sobre las dos ciudades:
Está claramente establecido que la mejor manera de resolver y gestionar este conflicto territorial requiere el respeto de las virtudes de un diálogo honesto, franco y abierto sobre el porvenir, un diálogo que garantice nuestros derechos de soberanía y que tome en consideración los intereses de España. [...] Marruecos no ha cesado de reclamar el fin de la ocupación española de Ceuta y Melilla y de las islas cercanas expoliadas en el norte del reino.
El 15 de noviembre el portavoz del gobierno, Khalid Naciri, al término de un Consejo de Gobierno, declaró que esperaba que los españoles «coloquen su mano dentro de la nuestra para superar la crisis y privilegiar nuestra relación bilateral. La relación hispano-marroquí ha pasado por una crisis». No fijó fecha para el regreso del embajador en Madrid, insistió en la necesidad de un diálogo entre las partes sobre el futuro de las ciudades autónomas españolas y concluyó que esperaba para el futuro que «nuestros amigos españoles tengan en consideración nuestros sentimientos, nuestra sensibilidad y nuestras reivindicaciones, cuyo propósito no es crear dificultades sino preservar nuestras relaciones».[13]​ A pesar de ello, el 16 de noviembre el Gobierno de Marruecos suspendió dos visitas de alto nivel de autoridades españolas: la de la ministra de Fomento, Magdalena Álvarez, que tenía previsto tratar con el ministro de Equipamiento y Transportes marroquí, Karim Ghellab, el túnel ferroviario de Gibraltar para unir los dos países a través del estrecho (cuestión sobre la que ambos vienen trabajando oficialmente desde 2005 cuando en Tánger se trató la evolución de los enlaces fijos entre Europa y África)[14]​ y la del jefe de Estado Mayor de la Armada de España, almirante Sebastián Zaragoza.[15]​
El mismo día 1 de noviembre, el ministro de Asuntos Exteriores de España, Miguel Ángel Moratinos, que se encontraba de visita en la ciudad marroquí de Marrakech, comunicó verbalmente al Ministro de Asuntos Exteriores marroquí, Taieb Fassi-Fihri que, a pesar de las manifestaciones del Primer Ministro, los Reyes de España visitarían las ciudades de Ceuta y Melilla los días 5 y 6 de noviembre como estaba previsto. Ese mismo día, en la habitual comparecencia del Gobierno de España después de la celebración de la reunión ordinaria del Consejo de Ministros, la vicepresidenta segunda del Gobierno, María Teresa Fernández de la Vega, manifestó que las relaciones con el gobierno de Marruecos «eran extraordinarias» y que el viaje de los reyes entraba dentro de la «normalidad institucional».[1]​ El ministro de Asuntos Exteriores, Moratinos, descartó realizar un gesto similar (retirar al embajador de España en Rabat), según informaron fuentes diplomáticas españolas.[16]​
El 3 de noviembre el ministro de Defensa, José Antonio Alonso, en unas declaraciones a la Cadena SER, manifestó que esperaba que el gesto de llamar a consultas al embajador —paso previo a la ruptura de relaciones diplomáticas— quedase sólo en eso, repitiendo las palabras de la vicepresidenta del Gobierno del día anterior respecto a la normalidad de la visita.[17]​
El ministro de Asuntos Exteriores expresó el día 14 de noviembre su confianza en el retorno del embajador marroquí en Madrid «cuanto antes».[18]​
Los partidos políticos españoles PP e Izquierda Unida, a través de Ángel Acebes y Gaspar Llamazares respectivamente, anunciaron su apoyo a la visita de los reyes de España a Ceuta y Melilla.[1]​ Gustavo de Arístegui, del Partido Popular, calificó de «excesiva» la reacción de Mohamed VI y criticó al presidente español por no dejar claras, a su juicio, las «líneas rojas» que Marruecos no puede franquear.[16]​ Por su parte Elena Valenciano, secretaria de Relaciones Internacionales del PSOE, había subrayado que la visita se enmarcaba en «la más absoluta normalidad institucional».[19]​
El presidente de Melilla, Juan José Imbroda, dijo que «no es el momento de dar la réplica a declaraciones altisonantes» en referencia a la posición marroquí.[20]​ Coalición por Melilla, primer partido de la oposición en la ciudad autónoma y de base musulmana, se manifestó muy satisfecho con la visita de los reyes, añadiendo que la presencia del rey de España era una «deuda histórica que tiene esta ciudad y por la que, desde esta formación, siempre hemos abogado para que se produjera la visita».[21]​ Por su parte, el presidente de Ceuta, Juan Jesús Vivas, se limitó a dictar un bando en el que instaba a los ciudadanos a recibir a los reyes honrándoles con la presencia de los ceutíes y «os honraréis a vosotros mismos, a nuestra ciudad y a nuestra amada Patria».[22]​
En el Parlamento de Marruecos, distintos diputados consideraron la visita como una «provocación grave», reclamando más firmeza a su ejecutivo.[17]​ En la cadena de televisión Al Yazira, un diputado marroquí de orientación islamista del Partido Justicia y Desarrollo, calificó la visita de «[...] provocación. Las dos ciudades son históricamente marroquíes [...] ¿Por qué no otra marcha verde?».[23]​ Por su parte, el subsecretario del mismo partido (Justicia y Desarrollo) Daubi Lasset declaró que esta situación provocaría un aumento de las posiciones extremistas en España y Marruecos que lamentaba, haciendo alusión al peligro de cómo sería entendida la visita por parte los terroristas de Al Qaeda cuando recientemente habían llamado a golpear los intereses occidentales en Marruecos por sus aproximaciones a Europa.[24]​ Por otro lado, el senador y presidente de la Comisión de Amistad Hispano-Marroquí, Yahya Yahya, manifestó a Radio Euskadi que «tenga usted por seguro que si viene el Rey de España a Melilla los marroquíes derramaremos hasta la última gota de sangre para defender nuestra tierra».[25]​ El mismo diputado, el 5 de noviembre y acompañado de periodistas, traspasó la frontera entre España y Marruecos por Melilla para protestar por la visita. Miembros del Cuerpo Nacional de Policía le indicaron entonces que tenía una orden de comparecencia ante un juzgado de Melilla por malos tratos a su mujer, a lo que Yahya Yahya respondió enseñando su pasaporte diplomático y volviendo a cruzar la frontera en dirección a Marruecos.[26]​
Para el lunes 5 de noviembre, día de la llegada del rey de España a Ceuta, la Comisión de Asuntos Exteriores, Defensa Nacional y Asuntos Islámicos de la Cámara de Representantes de Marruecos convocó una manifestación ante la embajada de España en Rabat con el fin de expresar su indignación. Previamente la Comisión aprobó una resolución en la que, por unanimidad, se manifestaban a favor de la acción del rey Mohamed VI de llamar a consulta al embajador en Madrid, al tiempo que invitaban a las autoridades marroquíes a «tomar, frente a esta situación, todas las medidas e iniciativas necesarias a la altura del descontento del pueblo marroquí ante esta visita lamentable e inoportuna».[27]​
El 4 de noviembre unos centenares de manifestantes se concentraron en los alrededores del consulado de España en Tetuán para reivindicar la condición marroquí de Ceuta y Melilla.[28]​ Junto a la frontera de Ceuta se manifestaron el día 5 de noviembre unos centenares de marroquíes, entre los que se encontraban alumnos de la vecina población de Fnideq y vecinos de Tetuán y Tánger llegados en autobuses fletados por las autoridades marroquíes.[29]​
El 28 de noviembre, el senador Yahya Yahya hizo de nuevo un llamamiento para organizar una marcha sobre el islote Perejil el día 10 de diciembre, con la finalidad de denunciar la situación de Ceuta y Melilla, a lo que el Gobierno de Marruecos dijo que «Yahya es un ciudadano, un patriota que disfruta de las libertades y de los derechos democráticos de los que disfrutan todos los ciudadanos».[30]​ No obstante, el 4 de diciembre, por resolución del cadí de Taghramt, demarcación a la que pertenece administrativamente el islote en la organización marroquí y figura político-administrativa dependiente del gobernador (similar al alcalde de un pequeño municipio) resolvió en contra de la manifestación alegando que era preciso que fuese convocada por un empadronado en el municipio, lo que fue considerado un gesto del gobierno de Marruecos para evitar el aumento de la tensión entre los dos Estados.[31]​
Al día siguiente de la prohibición, la autodenominada Coordinadora de las Organizaciones de la Sociedad Civil en el Norte de Marruecos convocó para los días 14 y 15 de diciembre una caravana de vehículos entre Nador y Tetuán que se dirigiría posteriormente hacia Ceuta. A su llegada a Ceuta se manifestarían frente a la frontera. Los convocantes denominaron a la marcha «Caravana de liberación y de desarrollo». El 6 de diciembre, el portavoz del Gobierno marroquí manifestó que «si hay alguien que busca hacer una manifestación conforme a la disposición de la ley, nosotros no podemos cancelarla».[32]​ La caravana, formada por unas doscientas personas, de las que cien (cincuenta según otras fuentes)[33]​ llegaron frente al islote Perejil, reivindicaron la soberanía sobre Ceuta y Melilla. Los organizadores justificaron la escasa presencia porque el acceso era difícil y los marroquíes se encontraban ocupados en las compras para la Fiesta del cordero. Al mismo tiempo, en conferencia de prensa, se anunció la creación de un «Frente Nacional» integrado por la «Coordinadora de las Organizaciones de la Sociedad Civil en el Norte de Marruecos» y el «Comité para la Liberación de Ceuta y Melilla» con el propósito de dar a conocer en el mundo la situación del colonialismo español.[33]​[34]​ La manifestación coincidió en el mismo día con unas declaraciones del número dos de Al Qaeda, Ayman al Zawahiri, quien dijo en una grabación de audio difundida a través de una página web utilizada normalmente por la organización terrorista, dirigiéndose a la comunidad islámica y a quienes quieren abandonar la violencia, que él no renunciará a al-Ándalus, Ceuta y Melilla.[35]​
El secretario general de la Liga Árabe, Amr Musa, en un comunicado hecho público el 8 de noviembre, manifestó su «apoyo total a Marruecos en sus exigencias de que se respeten sus derechos legítimos», haciendo referencia a un acuerdo de la Liga de 1975, pero sin mencionar la visita de los reyes de España.[36]​
En España, los diarios ABC y El País manifestaron en sendos editoriales el día 2 de noviembre, antes de conocer la retirada del embajador, su apoyo a la visita real. El País manifestó que se trataba de «una visita pertinente que pone fin a 32 años de anomalía», y ABC calificó de «reacción desmedida» las manifestaciones del Gobierno de Marruecos. En la misma línea se pronunciaron los medios de información más significativos de España.[37]​
El diario Al Massae, en un editorial del día 2 de noviembre, lamentaba la tibieza de la reacción marroquí cuando el presidente del gobierno de España, José Luis Rodríguez Zapatero, había visitado las ciudades de Ceuta y Melilla a principios de 2006, calificando ambas ciudades como «expoliadas».[16]​ También sostuvo en un artículo el 17 de noviembre, cuando la visita se había celebrado, que «más difícil que llamar a consultas al embajador es negociar el precio, las condiciones y el calendario para que vuelva» considerando que el regreso sólo se debía producir cuando exista por parte de España «un compromiso de que no volverán a repetirse las visitas del rey o del jefe de gobierno españoles».[38]​
Libération consideraba que la visita era «inaceptable», culpando al presidente del Gobierno español. En la misma línea se manifestaron Le Matin du Sahara et du Maghreb, que puso en relación la visita con el XXII aniversario de la marcha verde; L'Opinion culpaba también al presidente español y Al Bayane reivindicaba la antigua propuesta de Hassan II de crear una comisión bilateral que trate el problema al tiempo que proclamaba que «ni el pueblo admitirá jamás una política colonialista de hechos consumados».[39]​
El 3 de enero de 2008 el ministro de Asuntos Exteriores de España, Miguel Ángel Moratinos, se reunió en Rabat con su homólogo marroquí, Taib Fassi Fihri, a quien le hizo llegar una carta del presidente José Luis Rodríguez Zapatero dirigida al rey Mohamed VI, con la que ambos gobiernos esperaban solventar la crisis y que regresase a Madrid el embajador marroquí. El contenido de la carta abogaba por estrechar las relaciones bilaterales entre los dos países y no contenía promesa ni oferta por la vuelta del embajador a España, pero trataba de reflejar un espíritu conciliador y de amistad.[40]​ Ambos ministros también hablaron de la posición de sus respectivos gobiernos sobre Ceuta y Melilla, declarando el ministro español que «hay posiciones divergentes y son conocidas».[41]​[42]​ La visita de Moratinos fue criticada por el portavoz del Partido Popular en la Comisión de Exteriores del Congreso de los Diputados, Gustavo de Arístegui, quien afirmó que era un «error» y que «España no puede dar a entender que se equivocó». También pidió que, de fructificar la iniciativa, el Gobierno «no utilice electoralmente la vuelta del embajador».[43]​[44]​
Tras la visita de Moratinos y aún antes de la decisión final de Marruecos, Juan José Imbroda, presidente de la ciudad autónoma de Melilla y miembro del Partido Popular, señaló que «Marruecos no tiene una piedra puesta en Melilla, ni una piedra, y por ello confió en que el Gobierno de España dejara claro, como debe ser, que el reino alauí debe respetar la soberanía de las dos ciudades españolas y que al mismo tiempo coopere todo lo necesario con todo lo que conlleve a un mejor desarrollo político, social y económico de Marruecos»; por su parte y el mismo día, el presidente de la ciudad autónoma de Ceuta, Juan Jesús Vivas, también del Partido Popular, señaló que su Gobierno «ha respetado siempre las decisiones que el Gobierno de la nación toma en cuanto a las relaciones exteriores se refiere», lo que se interpretó como un apoyo al Ejecutivo español.[45]​[46]​
El 7 de enero el Ministerio de Asuntos Exteriores de Marruecos anunció de forma oficial el regreso «inmediato» de su embajador a Madrid, Omar Azziman, mediante un escueto comunicado. «Después de la visita realizada a Marruecos el jueves, 3 de enero, por el ministro español de Asuntos Exteriores, Miguel Ángel Moratinos, se ha decidido hoy el regreso inmediato a su puesto del embajador de Su Majestad el Rey a Madrid».[42]​ Dos días después se reincorporaba Omar Azziman a la sede de la embajada en España, destacando la solidez y madurez de las relaciones que han permitido la superación de la crisis. El mismo día el ejecutivo marroquí, a través de Jalid Naciri, declaró que España y Marruecos no están de acuerdo sobre la cuestión de Ceuta y Melilla, «pero estamos abiertos al futuro y a la necesidad de crear las condiciones para una asociación fructífera y amistosa entre los reinos de España y de Marruecos». El ministro de Asuntos Exteriores de España recibió en la misma tarde al embajador afirmando que se habían restablecido con «plena normalidad» las relaciones entre los dos países.[47]​[48]​[49]​
Tras el conflicto, ambos países retomaron sus agendas bilaterales con la visita del ministro de Asuntos Exteriores de Marruecos a España el 15 de enero para participar en el foro creado por el Gobierno español para impulsar el proyecto de la Alianza de Civilizaciones, mientras que el ministro de Asuntos Exteriores español viajó a Rabat el 20 de enero para participar en la ronda de conversaciones conjuntas que tienen establecidas el denominado «Grupo 5+5», impulsado por cinco países del norte de África y cinco de la Unión Europea para favorecer las relaciones euromediterráneas (Marruecos, Túnez, Libia, Argelia y Mauritania por un lado y España, Francia, Italia, Malta y Portugal por otro).[50]​
