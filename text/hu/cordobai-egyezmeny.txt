Az 1821. augusztus 24-én a mexikói függetlenségért harcoló Agustín de Iturbide és Juan O'Donojú új-spanyolországi alkirály által a Veracruz-beli Córdoba városában megkötött códrobai egyezmény az a szerződés volt, melyben a felek rögzítették, jórészt elismerik a fél évvel korábban kiadott Iguala-tervben rögzített célokat, többek között Mexikó függetlenségét alkotmányos monarchia formában.
Az acatempani ölelés során kibékült Agustín de Iturbide és Vicente Guerrero február 24-én kiadták az Iguala-tervet, melyben kimondták: Mexikó Spanyolországtól független alkotmányos monarchia, az egyetlen államvallás a római katolikus, a lakókat pedig azonos jogok illetik meg származásuktól függetlenül. Ennek a három „garanciának” védelmezésére és a háború lezárására hozták létre a Három Garancia Hadseregét.
Az új hadsereg létszáma kezdetben még a 2500 főt sem érte el, míg az alkirály több tízezer katonával rendelkezett. Hamarosan azonban a háromgaranciásokhoz ugyanúgy csatlakozott a maradék felkelők többsége, ahogy az eddig ellenük harcoló, korábban spanyolhű hadak (a mintegy 40 000-es (más forrás szerint 84 000-es) seregből mindössze 8000 maradt hű eredeti uraihoz). Óriási területeket bejárva csak kevés helyen kényszerültek csatára és azokat is könnyedén megnyerték. Számos város, melyet a hadsereg nem is érintett vonulása során, önként kinyilvánította csatlakozását az Iguala-tervhez. A háromgaranciások ellen nem elég határozottan fellépő Apodaca alkirályt (pontosabban új rangja szerint jefe políticót, azaz „politikai vezetőt”) a spanyolok leváltották, helyébe július 5-én Francisco Novellát nevezték ki, aki magát, sorsát előre látva „ideiglenes alkirálynak” nevezte. Katona alig állt rendelkezésére, és akik igen, azok is főként csak a fővárosban, Veracruzban, Durangóban, Perote erődjében és Acapulcóban. Oaxaca júliusban fogadta el a tervet, augusztus 2-án pedig Iturbide a tömeg éljenzése közepette vonult be Pueblába, ahol néhányan már az kiáltották: „Éljen I. Ágoston!” Az utolsó, kisebb csatára augusztus 19-én került sor Azcapotzalcónál (ma Mexikóváros egyik kerülete), itt Encarnación Ortiz háromgaranciás serege mért végső csapást a spanyolhű seregek maradványaira.
Időközben, július 30-án Veracruz kikötőjébe megérkezett Juan O'Donojú, akit a spanyolok új politikai főnöknek szántak. Ellenségei a kikötőt már megérkezésekor blokád alá vették, így az új „főnök” egy lépést sem tudott megtenni, és Novellával sem tudott találkozni, mivel ő akkor Mexikóvárosban tartózkodott. Ekkor egy kiáltványban kijelentette, hogy ha az ő rendszere (melyben még hitt, hogy létrejöhet) ellen bárki a legkisebb kifogást is emeli, meg fogja adni a lehetőséget, hogy helyette olyan vezetőt válasszanak maguknak, akit alkalmasabbnak gondolnak a feladatra. Továbbá írt egy levelet Iturbidének is Pueblába, melyben találkozóra és a helyzet végső tisztázására hívta, egyúttal menlevelet is kért tőle. Iturbide azonnal továbbította mind a kiáltványt, mind a levelet Novellának. Ideiglenes fegyverszünetet kötöttek, találkozási helyül pedig a Veracruztól nem túl messze fekvő Córdobát jelölték ki. O'Donojú augusztus 23-án érkezett meg a városba, ahol másnap Iturbidével részt vettek a misén, majd megtartották megbeszélésüket. Végül aláírták a 17 pontból álló córdobai egyezményt, melyben rögzítették: kisebb módosításokkal elismerik az Iguala-tervben megfogalmazott célokat. A módosítások közül legfontosabb volt, hogy már nem kötötték ki, hogy ha VII. Ferdinánd vagy rokonai nem fogadják el a mexikói trónt, akkor más uralkodóházból kell császárt választani, hanem bárkit lehetett. Ezzel megnyílt a lehetőség Iturbide császárrá választása előtt is.
A córdobai egyezményt Spanyolország nem ismerte el, és a veracruzi San Juan de Ulúa-erődben még négy évig tartották magukat spanyol csapatok, sőt, 1829-ben még egy visszahódítási kísérletet is indítottak Mexikó ellen Isidro Barradas vezetésével. Ez Vicente Guerrero elnöksége idején történt, de könnyen sikerült leverni. Végül 1836-ban hivatalosan is elismerték a córdobai egyezményt.
