Linia kolejowa nr 158 Rybnik Towarowy – Chałupki – linia kolejowa w południowo-zachodniej części województwa śląskiego. Linia na całej długości jest zelektryfikowana, odcinek Rybnik Towarowy – Wodzisław Śląski jest dwutorowy, a odcinek Wodzisław Śląski – Chałupki jednotorowy.
Linia jest linią pierwszorzędną na odcinku Rybnik Towarowy – Wodzisław Śląski oraz drugorzędną na odcinku Wodzisław Śląski – Chałupki. Na całej długości jest linią o znaczeniu państwowym. Przynależy ona do oddziału regionalnego PKP Polskich Linii Kolejowych w Tarnowskich Górach.
Linia kolejowa nr 158 rozpoczyna się od stacji Rybnik Towarowy w dzielnicy Niedobczyce, gdzie jest odgałęzieniem linii kolejowej nr 140. Pomiędzy stacjami Rybnik Towarowy i Wodzisław Śląski linia przeplata się z liniami nr 862, 877 i 876, które łączą powyższe stacje przez bocznicę szlakową przy KWK Marcel. Na południe od stacji Wodzisław Śląski linia biegnie równolegle do nieczynnych linii nr 159 (do Orzesza) i nr 875 (do bocznicy przy KWK 1 Maja). Na stacji Olza łączy się z nieczynną linią nr 176 do Raciborza Markowic. Od przystanku Rudyszwałd biegnie wspólnie z linią kolejową nr 151 aż do końcowej stacji Chałupki.
Linia na całym swoim przebiegu biegnie niemalże równolegle do drogi krajowej nr 78, którą kilkukrotnie przecina. Linia przecina się również z DK nr 45 i DW nr 933 oraz rzeką Odrą.
Linia przebiega przez miasto Rybnik, powiat wodzisławski (w tym dwa miasta: Radlin i Wodzisław Śląski) oraz powiat raciborski.
Linia wyposażona jest w elektromagnesy samoczynnego hamowania pociągów. Na linii nie występują żadne ograniczenia odnośnie dni tygodnia i godzin, w których linia może być użytkowana. Prędkość konstrukcyjna linii to 100 km/h. Według stanu z 29 listopada 2016 obowiązują następujące prędkości maksymalne dla pociągów:
Cała linia jest klasy C3. Sieć trakcyjna na całej długości linii jest przystosowana do prędkości maksymalnej od 110 km/h, obciążalność prądowa wynosi od 1725 A, a minimalna odległość pomiędzy odbierakami prądu wynosi 20 m.
Najdłuższym pod względem przejazdu odstępem blokowym pomiędzy dwoma stacjami jest jednotorowy szlak pomiędzy Wodzisławiem Śląskim a Olzą. Odcinek ten jest długości 12,686 km, a czas przejazdu z maksymalną dozwoloną prędkością wynosi niespełna 10 minut, tym samym przepustowość tego odcinka wynosi około 6 pociągów na godzinę.
Na linii znajduje się 11 punktów eksploatacyjnych, na żadnym z nich nie jest prowadzona sprzedaż biletów.
Na linii znajduje się 8 mostów i 2 wiadukty, największy z nich jest most na Odrze. Jest to most jednotorowy, 3-przęsłowy, o konstrukcji stalowej kratownicy i długości 129,85 metrów.
W 1846 roku otwarto pierwszy odcinek Kolei Wilhelma ((niem.) Wilhelmsbahn, obecnie linia kolejowa nr 151) łączącej Racibórz z Koźlem. W Koźlu linia łączyła się z Koleją Górnośląską ((niem.) Oberschlesische Eisenbahn) łączącą Górny Śląsk z Wrocławiem. W 1847 roku Kolej Wilhelma została przedłużona do Bogumina. W latach 1855–1858 otwierano kolejne odcinki Kolei Wilhelma łączące Racibórz z Katowicami przez Rybnik (obecnie linia kolejowa nr 140).
W 1861 roku mieszkańcy Wodzisławia uzyskali zgodę na budowę szosy łączącej swoje miasto ze stacją w Czernicy (obecnie stacja Rydułtowy). Budowę ukończono po kilku latach, dzięki czemu Wodzisław uzyskał połączenie z koleją prowadzącą do Raciborza i Katowic.
22 grudnia 1882 został otwarty odcinek Niedobczyce (obecnie Rybnik Towarowy) – Wodzisław Śląski, inwestorem była Kolej Górnośląska ((niem.) Oberschlesische Eisenbahn). W 1884 roku Kolej Górnośląska wraz z wszystkimi pozostałymi głównymi kolejami została znacjonalizowana i przejęta przez Zarząd Królewskich Pruskich Kolei Żelaznych ((niem.) Königlich Preußische Eisenbahn-Verwaltung). Linia przedłużona została  do Chałupek 1 października 1886.
Na przełomie lat 80. i 90. XIX w. funkcjonowała pod nazwą Annaberg-Rybnik. Wybudowana została jako normalnotorowa linią drugorzędna, składy obsługiwały ją z prędkością 30 km/h. Nachylenie najbardziej stromego podjazdu na tej trasie wynosiło 14‰.
W czasie I wojny światowej linia, podobnie jak większość linii Górnośląskiego Okręgu Przemysłowego, nie doznała żadnych zniszczeń, jednakże po zakończeniu wojny Niemcy zaprzestali inwestycji na kolejach Górnego Śląska, z uwagi na obawę o utratę tych terenów.
W czasie III powstania śląskiego 23 maja 1921 wzdłuż linii w pobliżu stacji kolejowej Olza doszło do bitwy pod Olzą. Po jej zakończeniu doszło do wysadzenia w powietrze mostu kolejowego w Olzie.
15 maja 1922 zawarto w Genewie Polsko-Niemiecką Konwencją Górnośląską regulującą m.in. funkcjonowanie kolei na Górnym Śląsku. Odcinek Wodzisław Śląski – Chałupki stał się odcinkiem granicznym z granicą na rzece Odrze i kontrolą paszportową w niemieckich Chałupkach.
W 1924 roku oddano do użytku przystanek kolejowy Czyżowice. Pod koniec lat 20. na potrzeby rosnącego ruchu towarowego rozbudowano stację Wodzisław, przy której wybudowano nową parowozownię wraz z warsztatem pomocniczym. W 1935 zakończono budowę linii kolejowej pomiędzy Moszczenicą a Cieszynem skracającą połączenie Rybnickiego Okręgu Węglowego z Czechami z pominięciem niemieckich Chałupek (linię kolejową pomiędzy Wodzisławiem a Moszczenicą otwarto w 1913 roku).
W 1939 roku podczas kampanii wrześniowej linie kolejowe na Górnym Śląsku ucierpiały w niewielkim stopniu, a od 1 stycznia 1940 zostały objęte niemieckim prawem kolejowym.
W styczniu 1945 miał miejsce marsz śmierci więźniów z KL Auschwitz do Wodzisławia Śląskiego, skąd więźniowie zostali przetransportowani pociągami w głąb Rzeszy, w tym celu hitlerowcy używali m.in. linii nr 158. W ostatnich miesiącach wojny podczas ofensywy Armii Czerwonej zniszczeniu uległ most nad Odrą.
W 1956 roku odbudowano most na Odrze. W 1964 roku dobudowano drugi tor na odcinku Rybnik Towarowy – Wodzisław Śląski, a 17 listopada
1981 została zakończona elektryfikacja tego odcinka. 21 grudnia 1984 ukończono również elektryfikację odcinka Wodzisław Śląski – Chałupki. W obu przypadkach pierwszym elektrycznym składem, który przejechał dany odcinek był EN57. W 1984 roku miała miejsce częściowa naprawa główna obu torów. W 1990 roku oddano do użytku przystanek kolejowy Rudyszwałd. W 2007 roku zlikwidowano mijankę w Czyżowicach.
W latach 2007–2008 poddany naprawie głównej został tor nr 1 na odcinku Rybnik Towarowy – Wodzisław Śląski, a rok później ponaddwukilometrowy odcinek toru nr 2 pomiędzy Rybnikiem Towarowym a Rybnikiem Rymerem. 11 maja 2012 oddano do użytku część obwodnicy Wodzisławia Śląskiego, w ramach której powstał wiadukt nad linią nr 158 pomiędzy stacją Wodzisław Śląski a przystankiem Wodzisław Śląski Radlin.
20 sierpnia 2012 pomiędzy stacjami Rybnik Towarowy i Rybnik Rymer doszło do wykolejenia pociągu wiozącego koks. 9 grudnia 2012 zawieszono ruch pasażerski na odcinku Wodzisław Śląski – Chałupki, a na odcinku Wodzisław Śląski – Rybnik Towarowy pociągi Przewozów Regionalnych zostały zastąpione pociągami Kolei Śląskich.
30 czerwca 2014 PKP PLK podpisały umowę z Centrum Unijnych Projektów Transportowych na dofinansowanie rewitalizacji linii nr 158 wraz z odcinkiem linii nr 140 Rybnik Towarowy – Rybnik w ramach Funduszu Spójności. 30 lipca spółka podpisała drugą umowę z konsorcjum przedsiębiorstw Rubau Polska, Construcciones Rubau i Rover Alcisa na wykonanie prac.
Pod koniec października 2014 jednotorowy odcinek Wodzisław Śląski – Chałupki został zamknięty dla ruchu i rozpoczął się na nim demontaż poszczególnych elementów infrastruktury kolejowej. Od 15 marca do 31 października 2015, w związku z pracami na terenie stacji Wodzisław Śląski, wjazd na nią nie był możliwy od strony Rybnika. W związku z tym pociągi pasażerskie Kolei Śląskich z Katowic i Rybnika kończyły bieg na przystanku Wodzisław Śląski Radlin. Stamtąd do dworca w Wodzisławiu uruchomiono autobusową komunikację zastępczą.
25 marca 2015 miasto Wodzisław Śląski kupiło od PKP dworzec kolejowy przy stacji Wodzisław Śląski. Magistrat planuje dworzec wyremontować i urządzić tam centrum przesiadkowe.
W ramach remontu odnowiono 13 peronów, które zostały dostosowane do potrzeb osób niepełnosprawnych. Wyposażono je w nowe systemy oświetlenia, wiaty, zegary oraz megafony do zapowiadania pociągów. Wymieniono łącznie 43 rozjazdy oraz urządzenia sterowania ruchem kolejowym, zmodernizowano 24 przejazdy kolejowe oraz zrewitalizowano 30 km linii kolejowych oraz wyremontowano budynki nastawni. W wyniku remontu prędkość maksymalna na linii wzrosła do 80 km/h. Przebudowie został poddany układ torów stacji Wodzisław Śląski (wyremontowano 6 z 14 torów) i stacji Olza (wyremontowano 3 z 6 torów). Początkowo planowano jeszcze budowę nowej stacji Wodzisław Śląski Centrum w pobliżu dworca autobusowego, jednakże ze względu na brak porozumienia miasta z PKP PLK odnośnie tego, czy na nowej stacji pociągi będą mogły kończyć bieg, zrezygnowano z tego pomysłu.
Nie zrealizowano również odbudowy mijanki w Czyżowicach, której nie ujęto w planach rewitalizacji i nie wiadomo czy w przyszłości zadanie to zostanie zrealizowane. 
30 października minął wynikający z kontraktu termin zakończenia wszystkich prac, jednakże tak się nie stało. 10 grudnia, na 3 dni przed planowanym powrotem pociągów pomiędzy Wodzisławiem a Chałupkami, PKP PLK poinformowało, że ze względu na nieukończenie wszystkich prac remontowych, otwarcie linii odbędzie się dopiero w drugiej połowie stycznia. Z tego powodu 13 grudnia Koleje Śląskie uruchomiły autobusową komunikację zastępczą pomiędzy Wodzisławiem a Chałupkami, a PKP Intercity planowane pociągi EIC przekierowały na trasę objazdową przez Zebrzydowice oraz uruchomiły komunikację zastępczą dla podróżnych, którzy zdążyli kupić bilety w przedsprzedaży do lub z stacji w Mikołowie, Rybniku, Wodzisławiu Śląskim lub Chałupkach. Główną przyczyną niedotrzymania terminu były nieukończone przejazdy kolejowe bądź niepodłączone do zasilania urządzenia na przejazdach kolejowech. 8 stycznia 2016 odcinek Wodzisław Śląski – Chałupki został dopuszczony do ruchu.
12 stycznia rozpoczęły się jazdy testowo-zapoznawcze pociągów Kolei Śląskich i PKP Intercity. Jazdy testowe rozpoczęły się pomimo iż stacja Wodzisław Śląski i Olza nie były jeszcze w pełni oddane do użytku. Ostatecznie, 18 stycznia pomiędzy Wodzisławiem a Chałupkami został wznowiony ruch pociągów pasażerskich, jednakże ze względu na nadal toczące się prace, pociągi nie były w stanie dotrzymać zaplanowanych czasów przejazdu. Problemy istnieją również w przejazdach pociągów towarowych, gdyż niedokończone stacje Wodzisław Śląski i Olza ograniczają przepustowość linii. Rozkład jazdy był układany tak, aby te utrudnienia minimalizować. 
Pomimo tego, że linia nie osiągnęła jeszcze pełnej przepustowości od 11 do 15 lutego 2016 linią kolejową 158 dodatkowo jeździły pociągi międzynarodowe „Polonia”, „Sobieski” i „Varsovia” (3 pary), omijając stację w Boguminie i Zebrzydowicach. Objazd linią 158 spowodowany był pożarem jaki wybuchł na stacji w Boguminie i wyłączeniem z ruchu tego węzła.
Na początku marca 2016 nadal trwały prace związane z poprawkami w infrastrukturze SRK i na przejazdach kolejowych. W czerwcu zakończono prace na stacjach Wodzisław Śląski i Olza i rozpoczęły się ich odbiory. Podczas odbiorów wykryto szereg usterek, których poprawianie trwało jeszcze w sierpniu. Ostatecznie urządzenie sterowania ruchem na stacji Olza zostały odebrane 31 sierpnia, a tory dodatkowe 7 września. W grudniu rozpoczęły się odbiory sygnalizacji na ostatnich 7 przejazdach kolejowych.
W marcu 2017 wyburzony został dworzec przy stacji Rybnik Towarowy. W lipcu rozpoczęły się remont torów nr 4 i 6 na stacji Wodzisław Śląski oraz nr 2 i 4 na stacji Olza w ramach programu „Poprawa bezpieczeństwa i likwidacja zagrożeń eksploatacyjnych na sieci kolejowej”.
7 czerwca 2018 prezydenci Rybnika i Wodzisławia Śląskiego oraz marszałek województwa śląskiego podpisali porozumienie odnośnie znacznie zwiększenia częstotliwości połączeń na odcinku Rybnik – Wodzisław Śląski na okres 4,5 roku. 10 czerwca liczba połączeń osobowych na odcinku Rybnik – Wodzisław wzrosła z 9 do 27 par.
W przyszłości linia ma być ponownie wykorzystywana jako objazd odcinka linii E 65 Katowice – Zebrzydowice w czasie gdy będzie on remontowany.
Na linii uruchamiane są pociągi Kolei Śląskich linii S71 relacji Katowice – Bogumin oraz PKP Intercity EIC „Comenius” (Warszawa – Ostrawa) oraz „Porta Moravica” i „Praha" (Warszawa – Praga). 
